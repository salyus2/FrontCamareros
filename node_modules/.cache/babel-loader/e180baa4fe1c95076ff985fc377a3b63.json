{"ast":null,"code":"import _objectSpread from \"/home/hab14/Nuva CArpeta/proyecto1/restaurant-proyect/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/hab14/Nuva CArpeta/proyecto1/restaurant-proyect/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/hab14/Nuva CArpeta/proyecto1/restaurant-proyect/src/shared/context/cart-context.js\";\nimport React, { useState, useContext } from \"react\";\nconst CartContext = React.createContext();\nexport function CartProvider({\n  children\n}) {\n  const _useState = useState(JSON.parse(localStorage.getItem(\"cart\")) || []),\n        _useState2 = _slicedToArray(_useState, 2),\n        cart = _useState2[0],\n        setCart = _useState2[1];\n\n  const addItemToCart = cartItem => {\n    let updatedCart = null;\n\n    if (cart.find(item => item.idProduct === cartItem.idProduct)) {\n      updatedCart = cart.map(item => {\n        if (item.idProduct === cartItem.idProduct) {\n          item.quantity++;\n        }\n\n        return item;\n      });\n    } else {\n      updatedCart = [_objectSpread({}, cartItem, {\n        quantity: 1\n      }), ...cart];\n    }\n\n    setCart(updatedCart);\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n  };\n\n  const removeItemFromCart = cartItem => {\n    let updatedCart = null;\n\n    if (cartItem.quantity > 1) {\n      updatedCart = cart.map(item => {\n        if (cartItem.idProduct === item.idProduct) {\n          item.quantity--;\n        }\n\n        return item;\n      });\n    } else {\n      updatedCart = cart.filter(item => cartItem.idProduct !== item.idProduct);\n    }\n\n    setCart(updatedCart);\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n  };\n\n  const removeItem = id => {\n    const updatedCart = cart.filter(cartItem => cartItem.idProduct !== id);\n    setCart(updatedCart);\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n  };\n\n  const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);\n  const totalPrice = cart.reduce((acc, item) => acc + item.quantity * parseInt(item.price, 0), 0);\n\n  const resetCart = () => {\n    localStorage.removeItem(\"cart\");\n    setCart([]);\n  };\n\n  return React.createElement(CartContext.Provider, {\n    value: {\n      cart,\n      addItemToCart,\n      removeItemFromCart,\n      removeItem,\n      totalItems,\n      totalPrice,\n      resetCart\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, children);\n}\nexport function useCart() {\n  const context = useContext(CartContext);\n  return context;\n}","map":{"version":3,"sources":["/home/hab14/Nuva CArpeta/proyecto1/restaurant-proyect/src/shared/context/cart-context.js"],"names":["React","useState","useContext","CartContext","createContext","CartProvider","children","JSON","parse","localStorage","getItem","cart","setCart","addItemToCart","cartItem","updatedCart","find","item","idProduct","map","quantity","setItem","stringify","removeItemFromCart","filter","removeItem","id","totalItems","reduce","acc","totalPrice","parseInt","price","resetCart","useCart","context"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\n\nconst CartContext = React.createContext();\n\nexport function CartProvider({ children }) {\n    const [cart, setCart] = useState(\n        JSON.parse(localStorage.getItem(\"cart\")) || []\n    );\n\n    const addItemToCart = cartItem => {\n        let updatedCart = null;\n\n        if (cart.find(item => item.idProduct === cartItem.idProduct)) {\n            updatedCart = cart.map(item => {\n                if (item.idProduct === cartItem.idProduct) {\n                    item.quantity++;\n                }\n                return item;\n            });\n        } else {\n            updatedCart = [{ ...cartItem, quantity: 1 }, ...cart];\n        }\n\n        setCart(updatedCart);\n        localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n    };\n\n    const removeItemFromCart = cartItem => {\n        let updatedCart = null;\n\n        if (cartItem.quantity > 1) {\n            updatedCart = cart.map(item => {\n                if (cartItem.idProduct === item.idProduct) {\n                    item.quantity--;\n                }\n                return item;\n            });\n        } else {\n            updatedCart = cart.filter(item => cartItem.idProduct !== item.idProduct);\n        }\n\n        setCart(updatedCart);\n        localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n    };\n\n    const removeItem = id => {\n        const updatedCart = cart.filter(cartItem => cartItem.idProduct !== id);\n        setCart(updatedCart);\n        localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n    };\n\n    const totalItems = cart.reduce((acc, item) => acc + item.quantity, 0);\n\n    const totalPrice = cart.reduce(\n        (acc, item) => acc + item.quantity * parseInt(item.price, 0),\n        0\n    );\n\n    const resetCart = () => {\n        localStorage.removeItem(\"cart\");\n        setCart([]);\n    };\n\n    return (\n        <CartContext.Provider\n            value={{\n                cart,\n                addItemToCart,\n                removeItemFromCart,\n                removeItem,\n                totalItems,\n                totalPrice,\n                resetCart\n            }}\n        >\n            {children}\n        </CartContext.Provider>\n    );\n}\n\nexport function useCart() {\n    const context = useContext(CartContext);\n    return context;\n}\n"]},"metadata":{},"sourceType":"module"}