{"ast":null,"code":"var _jsxFileName = \"/home/hab14/Nuva CArpeta/proyecto1/restaurant-proyect/src/components/Cart.js\";\nimport React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useCart } from \"../shared/context/cart-context\";\nimport { useOrder } from \"../shared/context/order-context\";\nimport { Link } from \"react-router-dom\";\nimport { postOrder, putOrder } from \"../http/authService\";\nimport \"../css/pedido.css\";\n\nfunction Cart() {\n  const history = useHistory();\n\n  const _useOrder = useOrder(),\n        order = _useOrder.order,\n        addOrder = _useOrder.addOrder,\n        verifyOrder = _useOrder.verifyOrder;\n\n  useEffect(() => {\n    verifyOrder();\n  }, []);\n\n  const _useCart = useCart(),\n        cart = _useCart.cart,\n        totalPrice = _useCart.totalPrice,\n        totalItems = _useCart.totalItems,\n        removeItemFromCart = _useCart.removeItemFromCart,\n        addItemToCart = _useCart.addItemToCart,\n        removeItem = _useCart.removeItem,\n        resetCart = _useCart.resetCart;\n\n  const makeOrder = pedido => {\n    postOrder(pedido).then(response => {\n      addOrder(response.data);\n    });\n  };\n\n  const updateOrder = (pedido, id) => {\n    putOrder(pedido, id).then(response => response.data);\n  };\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, React.createElement(\"main\", {\n    className: \"order\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, React.createElement(\"header\", {\n    className: \"home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, \"Aldach Has\"), React.createElement(\"button\", {\n    className: \"btn call\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"Ayuda\"), React.createElement(\"button\", {\n    className: \"product-menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, React.createElement(\"a\", {\n    href: \"/\",\n    onClick: e => {\n      e.preventDefault();\n      history.goBack();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Volver\"))), React.createElement(\"section\", {\n    className: \"order\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"order\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, cart.map(item => React.createElement(\"li\", {\n    className: \"order\",\n    key: item.idProduct,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"article\", {\n    className: \"order\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/product/${item.idProduct}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, `${item.name} `)), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, \" Precio unidad: \", `${item.price}€`), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \"Cantidad: \", item.quantity)), React.createElement(\"aside\", {\n    className: \"order\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"btn order \",\n    onClick: e => {\n      e.preventDefault();\n      addItemToCart(item);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"+\"), React.createElement(\"button\", {\n    className: \"btn order \",\n    onClick: e => {\n      e.preventDefault();\n      removeItemFromCart(item);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"-\"), React.createElement(\"button\", {\n    className: \"btn order remove\",\n    onClick: e => {\n      e.preventDefault();\n      removeItem(item.idProduct);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, \"Borrar\"))))), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"IVA = \", `${Number((totalPrice / 1.21).toFixed(2))}€`), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"Total = \", `${Number(totalPrice.toFixed(2))}€`)), React.createElement(\"footer\", {\n    className: \"order\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, totalItems > 0 && !order && React.createElement(\"button\", {\n    className: \"menu order\",\n    onClick: e => {\n      e.preventDefault();\n      makeOrder(cart);\n      resetCart();\n      history.push(\"/\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"Confirmar Pedido\"), totalItems > 0 && order && React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    className: \"menu order\",\n    onClick: e => {\n      e.preventDefault();\n      updateOrder(cart, order);\n      resetCart();\n      history.push(\"/\");\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Actualizar Pedido\"), React.createElement(\"button\", {\n    className: \"menu order\",\n    onClick: () => history.push(\"/confirmation\"),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115\n    },\n    __self: this\n  }, \"Pagar con tarjeta\")))));\n}\n\nexport { Cart };","map":{"version":3,"sources":["/home/hab14/Nuva CArpeta/proyecto1/restaurant-proyect/src/components/Cart.js"],"names":["React","useEffect","useHistory","useCart","useOrder","Link","postOrder","putOrder","Cart","history","order","addOrder","verifyOrder","cart","totalPrice","totalItems","removeItemFromCart","addItemToCart","removeItem","resetCart","makeOrder","pedido","then","response","data","updateOrder","id","e","preventDefault","goBack","map","item","idProduct","name","price","quantity","Number","toFixed","push"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { useCart } from \"../shared/context/cart-context\";\nimport { useOrder } from \"../shared/context/order-context\"\nimport { Link } from \"react-router-dom\";\nimport { postOrder, putOrder } from \"../http/authService\"\n\nimport \"../css/pedido.css\"\n\nfunction Cart() {\n    const history = useHistory();\n\n    const { order, addOrder, verifyOrder } = useOrder();\n\n    useEffect(() => { verifyOrder() }, [])\n    const {\n        cart,\n        totalPrice,\n        totalItems,\n        removeItemFromCart,\n        addItemToCart,\n        removeItem,\n        resetCart\n    } = useCart();\n\n    const makeOrder = (pedido) => {\n        postOrder(pedido).then((response => {\n            addOrder(response.data)\n        }))\n    }\n\n    const updateOrder = (pedido, id) => {\n        putOrder(pedido, id).then((response =>\n            response.data\n        ))\n    }\n    return (\n        <React.Fragment>\n            <main className=\"order\">\n                <header className=\"home\">\n                    <h1>Aldach Has</h1>\n                    <button className=\"btn call\">Ayuda</button>\n                    <button className=\"product-menu\"><a\n                        href=\"/\"\n                        onClick={e => {\n                            e.preventDefault();\n                            history.goBack();\n                        }}\n                    >\n                        Volver\n            </a></button>\n                </header>\n                <section className=\"order\">\n                    <ul className=\"order\">\n                        {cart.map(item => (\n                            <li className=\"order\" key={item.idProduct}>\n                                <article className=\"order\">\n                                    <h3><Link to={`/product/${item.idProduct}`}>{`${item.name} `}</Link></h3>\n                                    {/* <p>Hamburguesa de carne de ternera, con cebolla caramelizada, queso cheddar y salsa de mostaza dulce</p> */}\n                                    <p> Precio unidad: {`${item.price}€`}</p>\n                                    <p>Cantidad: {item.quantity}</p>\n                                </article>\n                                <aside className=\"order\">\n                                    <button className=\"btn order \"\n                                        onClick={e => {\n                                            e.preventDefault();\n                                            addItemToCart(item);\n                                        }}\n                                    >\n                                        +\n                            </button>\n                                    <button className=\"btn order \"\n                                        onClick={e => {\n                                            e.preventDefault();\n                                            removeItemFromCart(item);\n                                        }}\n                                    >\n                                        -\n                            </button>\n                                    <button className=\"btn order remove\"\n                                        onClick={e => {\n                                            e.preventDefault();\n                                            removeItem(item.idProduct);\n                                        }}\n                                    >\n                                        Borrar\n                            </button>\n                                </aside>\n                            </li>\n                        ))}\n                    </ul>\n                    <p>IVA = {`${Number((totalPrice / 1.21).toFixed(2))}€`}</p>\n                    <p>Total = {`${Number(totalPrice.toFixed(2))}€`}</p>\n                </section>\n                <footer className=\"order\">\n                    {\n                        totalItems > 0 && !order && (\n                            <button className=\"menu order\" onClick={(e) => {\n                                e.preventDefault();\n                                makeOrder(cart);\n                                resetCart();\n                                history.push(\"/\")\n                            }}>Confirmar Pedido</button>\n                        )\n                    }\n                    {\n                        totalItems > 0 && order && (\n                            <React.Fragment>\n                                <button className=\"menu order\" onClick={(e) => {\n                                    e.preventDefault();\n                                    updateOrder(cart, order)\n                                    resetCart();\n                                    history.push(\"/\")\n                                }}>Actualizar Pedido</button>\n                                <button className=\"menu order\" onClick={() => history.push(\"/confirmation\")}>Pagar con tarjeta</button>\n                            </React.Fragment>\n                        )\n                    }\n                </footer>\n            </main>\n        </React.Fragment >\n    );\n}\n\nexport { Cart };\n"]},"metadata":{},"sourceType":"module"}